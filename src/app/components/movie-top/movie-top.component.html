<div class="w-full h-full min-h-screen relative overflow-hidden">
  <ng-container *ngIf="movieCredits$ | async as credits">
    <ng-container *ngIf="movieDetails">
      <div class="imagenfondo">
        <div></div>
        <img
          [src]="
            'https://image.tmdb.org/t/p/w1280/' + movieDetails.backdrop_path
          "
          alt=""
        />
      </div>

      <div
        class="pl-16 pr-16 max-sm:pr-4 max-lg:pl-8 max-lg:pr-8 max-sm:pl-4 pt-28 posterMovie grid gap-colums relative z-10"
      >
        <article class="poster grid1 max-h-content">
          <div class="flex flex-col gap-2 justify-center items-center">
            <div class="">
              <img
                class="w-full h-full object-cover rounded max-md:rounded-lg"
                [src]="
                  'https://image.tmdb.org/t/p/w500' + movieDetails.poster_path
                "
                alt=""
              />
            </div>
            <button
              (click)="change()"
              type="button"
              class="flex items-center justify-center gap-2 w-4/5 animacion text-white bg-blue-600 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 rounded-full px-4 py-1 text-center font-normal"
            >
              <i class="fa-solid fa-play text-white text-2xl"></i>
              <span class="text-white text-lg max-sm:text-sm">trailer</span>
            </button>
            <div
              class="relative hidden gap-2 mt-1 items-center animation group cursor-pointer agregar2 text-white"
            >
              <button
                type="button"
                class="w-6 h-6 grid place-content-center group-hover:text-blue-700 animacion text-white bg-blue-600 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded"
              >
                <i class="fa-solid fa-plus group-hover:text-yellow-500"></i>
              </button>
              <span class="hover:text-blue-700">Agregar a</span>

              <i
                class="fa-solid fa-angle-right group-hover:text-blue-700 text-blue-500"
              ></i>
              <div
                class="transition-all duration-300 ease-in-out h-[30px] max-h-[30px] right-0 w-0 flex justify-center items-center absolute rounded fondo group-hover:-right-[126px] -top-[2px] gap-2 group-hover:w-full overflow-hidden"
              >
                <i class="fa-solid fa-heart text-yellow-500"></i>
                <div (click)="addToMyList()" class="hover:text-blue-600 relative h-[25px] text-center">
                  Mi lista
                </div>
              </div>
            </div>
          </div>
        </article>

        <article class="text-white grid2 flex gap-5 justify-start items-center">
          <h2 class="text-white font-bold text-xl sm:text-4xl">
            {{ movieDetails.title }}
          </h2>
          <div
            class="relative flex gap-2 mt-1 items-center animation group cursor-pointer agregar1"
          >
            <button
              type="button"
              class="w-6 h-6 grid place-content-center animacion text-white bg-blue-600 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded"
            >
              <i class="fa-solid fa-plus group-hover:text-yellow-500"></i>
            </button>
            <span class="hover:text-blue-700">Agregar a</span>
            <svg
              class="fill-current h-4 w-4 text-blue-500"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
            >
              <path
                d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"
              />
            </svg>
            <div
              class="transition-all duration-300 ease bottom-0 h-0 flex group-hover:h-[30px] justify-center items-center absolute group-hover:-bottom-8 rounded fondo gap-2 w-full overflow-hidden"
            >
              <i class="fa-solid fa-heart text-yellow-500"></i>
              <div (click)="addToMyList()" class="hover:text-blue-600">Mi lista</div>
            </div>
          </div>
        </article>
        <article class="grid5">
          <p class="text-blue-200 text-sm">{{ movieDetails.original_title }}</p>
          <section class="flex items-center flex-wrap justify-between">
            <div class="flex items-center">
              <circle-progress
                [title]="title"
                [innerText]=""
                [titleColor]="'#EDB709'"
                [percent]="barra()"
                [space]="-2"
                [radius]="20"
                [outerStrokeWidth]="2"
                [innerStrokeWidth]="2"
                [outerStrokeColor]="'#faa906'"
                [innerStrokeColor]="'#8DA0BC'"
                [animation]="true"
                [animationDuration]="1000"
                [titleFontSize]="'15'"
                [showSubtitle]="false"
                [showUnits]="true"
                [unitsColor]="'#EDB709'"
                [unitsFontSize]="'15'"
                [showBackground]="true"
              ></circle-progress>
              <div>
                <div class="flex items-center flex-wrap">
                  <svg
                    aria-hidden="true"
                    [style]="color"
                    class="w-5 h-5 text-gray-400"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
                    ></path>
                  </svg>
                  <svg
                    [style]="color2"
                    aria-hidden="true"
                    class="w-5 h-5 text-gray-400"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
                    ></path>
                  </svg>
                  <svg
                    [style]="color3"
                    aria-hidden="true"
                    class="w-5 h-5 text-gray-400"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
                    ></path>
                  </svg>
                  <svg
                    [style]="color4"
                    aria-hidden="true"
                    class="w-5 h-5 text-gray-400"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
                    ></path>
                  </svg>
                  <svg
                    [style]="color5"
                    aria-hidden="true"
                    class="w-5 h-5 text-gray-400"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
                    ></path>
                  </svg>
                </div>
                <div class="text-xs text-blue-300">
                  (
                  <span class="font-bold text-xs">{{
                    movieDetails.vote_count
                  }}</span>
                  votos, promedio
                  <span class="font-bold text-xs">{{
                    getVotes(movieDetails.vote_average)
                  }}</span>
                  de 10 )
                </div>
              </div>
            </div>
            <div
              class="flex max-sm:justify-between w-full gap-2 sm:gap-4 overflow-hidden max-sm:text-sm"
            >
              <div class="flex gap-1">
                <div class="text-blue-300">
                  {{ getHours(movieDetails.runtime) }}h
                </div>
                <div class="text-blue-300">{{ this.minutes }}m</div>
              </div>

              <div class="text-blue-300 overflow-hidden max-sm:text-sm">
                {{ movieDetails.release_date }}
              </div>
            </div>
          </section>
        </article>
        <article class="text-blue-200 overflow-auto grid3">
          {{ movieDetails.overview }}
        </article>

        <article class="text-white block grid4">
          <p
            *ngIf="getDirectors(credits.crew).length"
            class="flex gap-2 text-blue-200"
          >
            Director:
            <span
              class="text-white"
              *ngFor="let i of getDirectors(credits.crew)"
              >{{ i }}</span
            >
          </p>
          <p class="flex gap-2 text-blue-200">
            Genero:
            <span
              class="text-white"
              *ngFor="let i of getGenres(movieDetails.genres)"
              >{{ i }}</span
            >
          </p>
          <p *ngIf="movieDetails.budget">
            <span class="text-blue-300"> Presupuesto:</span>
            {{ movieDetails.budget | currency : "USD" : "symbol" : ".0-0" }}
          </p>
          <p *ngIf="movieDetails.revenue">
            <span class="text-blue-300">Ingresos:</span>
            {{ movieDetails.revenue | currency : "USD" : "symbol" : ".0-0" }}
          </p>
        </article>
      </div>

      <!-- ///////////////////////actores////////////////////////////// -->

      <div
        class="h-min w-full slide overflow-y-auto z-10 pl-16 pr-16 max-sm:pr-4 max-lg:pl-8 max-lg:pr-8 max-sm:pl-4"
      >
        <swiper
          [loop]="true"
          [loopFillGroupWithBlank]="true"
          [pagination]="false"
          [navigation]="true"
          [breakpoints]="{
            '0': {
              slidesPerView: 1,
              spaceBetween: 10,
              slidesPerGroup: 1
            },
            '190': {
              slidesPerView: 2,
              spaceBetween: 10,
              slidesPerGroup: 2
            },
            '342': {
              slidesPerView: 3,
              spaceBetween: 10,
              slidesPerGroup: 3
            },
            '520': {
              slidesPerView: 4,
              spaceBetween: 15,
              slidesPerGroup: 4
            },
            '768': {
              slidesPerView: 5,
              spaceBetween: 20,
              slidesPerGroup: 5
            },
            '1024': {
              slidesPerView: 6,
              spaceBetween: 20,
              slidesPerGroup: 6
            },
            '1280': {
              slidesPerView: 8,
              spaceBetween: 30,
              slidesPerGroup: 8
            },
            '1400': {
              slidesPerView: 10,
              spaceBetween: 30,
              slidesPerGroup: 10
            }
          }"
          class="mySwiper"
        >
          <ng-template
            *ngFor="let i of getActors(credits.cast)"
            swiperSlide
            class="group cursor-pointer mt-5 bg-transparent"
          >
            <div class="w-full h-full">
              <div class="relative overflow-hidden">
                <div class="flex flex-col items-center">
                  <img
                    class="rounded-lg max-h-36"
                    [src]="getURL(i.profile_path)"
                    alt=""
                  />
                </div>
              </div>
              <div
                class="text-white text-sm group-hover:text-blue-600 text-center"
              >
                {{ i.name }}
              </div>
            </div>
          </ng-template>
        </swiper>
      </div>
    </ng-container>
    <!-- /////////////////////////////////////////////////////// -->

    <!-- ///////////////////////////// -->
  </ng-container>

  <div #youtube class="video -z-30 relative">
    <button
      (click)="change(); actualizar()"
      type="button"
      class="text-blue-700 border border-blue-700 hover:bg-blue-700 hover:text-white focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-full text-sm p-2.5 text-center grid content-center -top-12 -right-9 absolute h-10 w-10 botonclose"
    >
      <i class="fa-solid fa-xmark text-2xl"></i>
    </button>
    <div #demoYouTubePlayer class="demo-youtube-player">
      <section>
        <ng-container *ngIf="movieTrailers$ | async as movieTrailers">
          <ng-container *ngIf="movieTrailers.results.length; else video">
            <youtube-player
              *appRecarga="recargar"
              suggestedQuality="highres"
              [videoId]="getTrailer(movieTrailers)"
              [width]="videoWidth"
              [height]="videoHeight"
            ></youtube-player>
          </ng-container>
        </ng-container>
      </section>
    </div>
  </div>
  <div #covermovie (click)="actualizar()" class="cover -z-50"></div>
</div>
<ng-template #video
  ><img src="../../../assets/images/travolta3.png"
/></ng-template>
